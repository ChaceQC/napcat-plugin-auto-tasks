# NapCat Auto Tasks 插件

基于 **NapCat** 框架的高性能自动化任务管理插件，旨在为 QQ 机器人提供稳定、灵活的定时和循环任务支持。

## 🌟 核心功能

* **多维度内置任务**：
    * **群自动打卡**：支持多群组定时签到。
    * **自动续火花**：支持好友和群组的互动维护，确保火花不熄灭。
* **动态自定义任务**：
    * **灵活槽位**：通过 UI 动态调整任务数量，自动生成配置界面。
    * **双触发模式**：支持“每日定时（HH:mm:ss）”或“固定间隔（秒）”循环执行。
* **智能任务管理**：
    * **强效清理**：采用全局定时器注册机制，解决插件重载时任务无法停止的残留进程问题。
    * **CQ 码兼容**：所有任务消息均支持标准 CQ 码，可发送图片、表情、At 等。

## 📦 安装与构建

1.  **准备环境**：确保已安装 Node.js 和 npm。
2.  **获取代码并打包**：
    ```bash
    npm install
    npm run build
    ```
3.  **部署**：
    * 将生成的 `dist/index.mjs` 和 `package.json` 拷贝到 NapCat 的 `plugins/auto-tasks/` 目录下。
4.  **运行**：重启 NapCat 即可加载插件。

## 🛠️ 配置说明

您可以通过 NapCat 提供的图形化界面直接配置：

| 配置项 | 说明 | 示例 |
| :--- | :--- | :--- |
| **当前任务数量** | 控制显示的自定义任务槽位个数 | `5` |
| **执行时间** | 每日固定触发的时间点 | `08:00:00` |
| **循环间隔** | 每隔多少秒执行一次（优先级高于定时） | `3600` |
| **目标号码** | 群号或 QQ 号 | `12345678` |
| **消息内容** | 支持纯文本及 CQ 码 | `[CQ:face,id=14] 早上好！` |

## 📂 项目结构

* `src/index.ts`: 插件入口，管理生命周期与 UI 构建。
* `src/taskManager.ts`: 核心引擎，负责定时器调度与进程回收。
* `src/config.ts`: 配置文件处理与动态 UI 渲染逻辑。
* `src/types.ts`: 接口定义与默认配置。

## 📝 许可证

本项目基于 MIT 协议开源。